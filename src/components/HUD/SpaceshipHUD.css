.hud-container {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden;
  background-color: #0A0A2E; /* From theme.colors.backgroundDefault */
  /* display: flex; Removed to allow absolute positioning of panels */
  /* flex-direction: column; */
  /* justify-content: center; */
  /* align-items: center; */
}

.panel-wrapper {
  position: absolute; /* Panels are positioned absolutely */
  z-index: 10;
  transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  opacity: 1;
  transform: scale(1);
}

.panel-wrapper.hidden {
  opacity: 0;
  transform: scale(0.95);
  pointer-events: none;
}

/* Panel Specific Positioning */
.command-deck-panel {
  top: 10px;
  left: 10px;
}

.targeting-scanner-panel {
  top: 10px;
  right: 10px;
}

.mission-console-panel {
  bottom: 50px; /* Adjusted to leave space for StatusBar */
  left: 10px;
}

.comms-log-panel {
  bottom: 50px; /* Adjusted to leave space for StatusBar */
  left: 50%;
  transform: translateX(-50%);
}

.skill-galaxy-panel {
  bottom: 50px; /* Adjusted to leave space for StatusBar */
  right: 10px;
}
/* End Panel Specific Positioning */

.hud-map-viewport {
  border: 2px solid #00F3FF; /* theme.colors.primary for a subtle frame */
  box-shadow: 0 0 15px #00F3FF, inset 0 0 15px #00F3FF; /* theme.effects.glowStrong(theme.colors.primary) */
  /* Adjust width and height to account for panels, or use margins on panels */
  width: calc(100% - 220px); /* Example: 10px padding + 200px panel width on each side */
  height: calc(100% - 120px); /* Example: 10px padding + 100px panel height top/bottom */
  max-width: 1600px; 
  max-height: 1000px;
  position: absolute; /* Centering with absolute positioning */
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0,0,0,0.1);
}

/* Styling for StatusBar */
.hud-container > .status-bar {
  width: calc(100% - 20px);
  position: absolute;
  bottom: 10px; /* Closer to the edge */
  left: 10px;
  z-index: 10; /* Ensure it's above map but can be below panels if needed */
  box-sizing: border-box;
}

/* --- Mobile Responsiveness --- */
@media (max-width: 768px) {
  .hud-container {
    overflow-y: auto; /* Allow scrolling for stacked panels */
  }
  
  .panel-wrapper {
    position: relative; /* Stack panels in normal document flow on mobile */
    width: calc(100% - 20px); /* Full width with some margin */
    margin: 10px;
    left: auto;
    top: auto;
    right: auto;
    bottom: auto;
    transform: none; /* Reset transform */
    z-index: 1; /* Reset z-index for stacking */
  }

  /* Reset specific panel positions for mobile stacking */
  .command-deck-panel,
  .targeting-scanner-panel,
  .mission-console-panel,
  .comms-log-panel,
  .skill-galaxy-panel {
    top: auto;
    left: auto;
    right: auto;
    bottom: auto;
    transform: none;
  }
  
  .hud-map-viewport {
    position: relative; /* No longer absolute to allow stacking */
    width: calc(100% - 20px); /* Full width with margin */
    height: 50vh; /* Or a fixed height, e.g., 300px */
    margin: 10px;
    top: auto;
    left: auto;
    transform: none; /* Reset transform */
    /* order: -1; /* Optionally move map to top in flex context if HUD container was flex */
  }
  
  /* Adjust StatusBar for mobile if needed, might be fine if panels stack above it */
  .hud-container > .status-bar {
    position: relative; /* Stack with other elements */
    bottom: auto;
    left: auto;
    width: calc(100% - 20px);
    margin: 10px;
  }
}
